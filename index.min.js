(function(h){var g;if(typeof process==="object"&&process&&process.nextTick){g=process.nextTick;}else{if(typeof setImediate==="function"){g=setImediate;
}else{g=function(m){setTimeout(m,0);};}}var e=function(m){return m&&m.then&&typeof m.then==="function";};var j=function(){};var a=function(n,m){return n;
};function l(p,r){r=!!r;var n,o,m,q;n={isResolved:false,isRejected:false,isSettled:false,reason:null,value:null,waiting:null};o=function(t){i(n,t,r);};
m=function(u,t){k(n,u,t);};q=function(t,u){return b(n,t,u,r);};if(r){try{p(o,m);}catch(s){m(s);}}else{p(o,m);}return{then:q};}function b(n,m,o,p){return l(function(q,r){n.waiting=f(n,m,o||(o=a),q,r,p);
},p);}function i(m,o,n){if(m.isResolved){return;}m.isResolved=true;if(e(o)){c(m,o,n);}else{d(m,null,o);}}function k(m,o,n){if(m.isRejected){return;}m.isRejected=true;
d(m,o,n);}function d(m,o,n){if(m.isSettled){return;}m.isSettled=true;m.reason=o;m.value=n;g(function(){(m.waiting||j)();});}function f(n,m,p,o,q,r){return function(){var t,s;
s=!n.isResolved;if(r){try{t=s?p(n.reason,n.value):m(n.value);}catch(u){if(!s){q(u,n.value);}else{q(Array.isArray(n.reason)?n.reason.concat(u):[n.reason,u],n.value);
}return;}}else{t=s?p(n.reason,n.value):m(n.value);}if(!s){o(t);}else{q(t,n.value);}n=null;};}function c(m,o,p){var r=function(s){if(e(s)){c(m,s,p);}else{d(m,null,s);
}};var n=function(t,s){m.isResolved=false;m.isRejected=true;d(m,t,s);};if(p){try{o.then(r,n);}catch(q){n(q,m.value);}}else{o.then(r,n);}}if(h.window){if(typeof define==="function"&&define.amd){define(function(){return l;
});}}else{if(module&&module.exports){module.exports=l;}}return l;})(this);