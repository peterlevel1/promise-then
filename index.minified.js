(function(i){var h;if(typeof process==="object"&&process&&process.nextTick){h=process.nextTick;}else{if(typeof setImediate==="function"){h=setImediate;
}else{h=function(o){setTimeout(o,0);};}}var e=function(o){return o&&o.then&&typeof o.then==="function";};var l=function(){};var a=function(o){return o;
};function n(r,t){t=!!t;var p,q,o,s;p={isResolved:false,isRejected:false,isSettled:false,reason:null,value:null,waiting:null};q=function(v){j(p,v,t);};
o=function(w,v){m(p,w,v);};s=function(v,w){return b(p,v,w,t);};if(t){try{r(q,o);}catch(u){o(u);}}else{r(q,o);}return{then:s};}function b(p,o,q,r){return n(function(s,t){p.waiting=g(p,o,q||(q=a),s,t,r);
},r);}function j(o,q,p){if(o.isResolved){return;}o.isResolved=true;if(e(q)){c(o,q,p);}else{d(o,null,q);}}function m(o,q,p){if(o.isRejected){return;}o.isRejected=true;
d(o,q,p);}function d(o,q,p){if(o.isSettled){return;}o.isSettled=true;o.reason=q;o.value=p;h(function(){(o.waiting||l)();});}function g(p,o,r,q,s,t){return function(){var v,u;
u=!p.isResolved;if(t){try{v=u?r(p.reason,p.value):o(p.value);}catch(w){if(!u){s(w,p.value);}else{s(Array.isArray(p.reason)?p.reason.concat(w):[p.reason,w],p.value);
}return;}}else{v=u?r(p.reason,p.value):o(p.value);}if(!u){q(v);}else{s(v,p.value);}p=null;};}function f(o,p,q){return function(r){if(e(r)){c(o,r,q);}else{d(o,null,r);
}};}function k(o,p,q){return function(s,r){o.isResolved=false;o.isRejected=true;d(o,s,r);};}function c(o,q,r){var p=Array.prototype.slice.call(arguments);
if(r){try{q.then(f.apply(null,p),k.apply(null,p));}catch(s){k.apply(null,p)(s,o.value);}}else{q.then(f.apply(null,p),k.apply(null,p));}}if(!!i.window){if(typeof define==="function"&&define.amd){define(function(){return n;
});}}else{if(module&&module.exports){module.exports=n;}}return n;})(this);